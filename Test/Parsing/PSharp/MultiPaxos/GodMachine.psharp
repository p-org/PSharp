namespace MultiPaxos
{
    main machine GodMachine
    {
	    List<Machine> PaxosNodes;

		start state Init
		{
		    entry
			{
			    PaxosNodes = new List<Machine>();

				var temp = create PaxosNode(1);
				PaxosNodes.Add(temp);

				temp = create PaxosNode(2);
				PaxosNodes.Add(temp);

				temp = create PaxosNode(3);
				PaxosNodes.Add(temp);

				foreach (var node in PaxosNodes)
				{
				    send node, allNodes (PaxosNodes);
				}

				create Client(PaxosNodes);
			}
		}
    }
}
