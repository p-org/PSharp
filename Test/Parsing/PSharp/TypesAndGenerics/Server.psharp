using System;
using System.Collections.Generic;

namespace TypesAndGenerics
{
    main machine Server
    {	
        Client Client;
		System.Collections.Generic.List<Tuple<int[], bool>> Field;

        start state Init
        {
            entry
            {
                this.Client = create Client ( this );
				this.Field = new List<Tuple<int[], bool>>();
                raise Unit;
            }

            on Unit goto Playing;
        }
		
        state Playing
        {
            entry
            {
                send Pong to this.Client;
            }

            on Unit do SendPong;
            on Ping do SendPong;
            on Stop do StopIt;
        }

        action SendPong
        {
            send Pong to this.Client;
        }

        action StopIt
        {
            Console.WriteLine("Server stopped.\n");
            delete;
        }
    }
}
